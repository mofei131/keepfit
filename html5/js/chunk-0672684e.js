(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0672684e"],{1148:function(e,t,a){"use strict";var s=a("a691"),i=a("1d80");e.exports="".repeat||function(e){var t=String(i(this)),a="",l=s(e);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(t+=t))1&l&&(a+=t);return a}},"15db":function(e,t,a){a("0d03"),a("a9e3"),a("d3b7"),a("25f0");for(var s=function(e){return Number(e)<10?"0"+e:e.toString()},i=[],l=[],n=[20,21,22,23,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],o=0;o<n.length;o++)i.push(s(n[o]));for(var r=0;r<60;r++)l.push(s(r));for(var p=[],c=0;c<i.length;c++)for(var d=0;d<l.length;d++)p.push(i[c]+":"+l[d]);e.exports={grid:{left:0,top:10,right:0,bottom:10},tooltip:{trigger:"axis",showDelay:2e9,axisPointer:{shadowStyle:{color:"red",opacity:.1}}},color:["#EBCDFE"],xAxis:{data:p,type:"category",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisPointer:{type:"line",lineStyle:{color:"#EBCDFE",opacity:1,width:.5}},axisLabel:{show:!1,color:"red",fontSize:10}},yAxis:{data:[10,20,30],splitLine:{show:!1,lineStyle:{width:.5,type:"dashed",color:"#ccc"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1,color:"#999",fontSize:10,margin:-10}},series:[{name:"睡眠",type:"line",markArea:{show:!0,data:[]}}]}},"228c":function(e,t){e.exports={backgroundColor:"#fff",selectedMode:!1,grid:{left:5,top:5,right:5,bottom:5},series:[{name:"睡眠时长",type:"pie",selectedOffset:4,selectedMode:"single",radius:"90%",center:["50%","50%"],color:["#5C73FF","#AC009A"],data:[{value:0,name:"浅睡",selected:!0},{value:0,name:"深睡"}],label:{normal:{show:!0,position:"inside",formatter:"{c}%",textStyle:{fontSize:14,color:"#B1BCFF",fontWeight:500}},emphasis:{show:!0}}}]}},"408a":function(e,t,a){var s=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=s(e))throw TypeError("Incorrect invocation");return+e}},4795:function(e,t,a){var s=a("23e7"),i=a("da84"),l=a("342f"),n=[].slice,o=/MSIE .\./.test(l),r=function(e){return function(t,a){var s=arguments.length>2,i=s?n.call(arguments,2):void 0;return e(s?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,a)}};s({global:!0,bind:!0,forced:o},{setTimeout:r(i.setTimeout),setInterval:r(i.setInterval)})},"8a5e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-view"},[a("my-head",{attrs:{name:e.dateTime,type:1},on:{ckLeft:e.closePage,clickConten:e.clickConten,ckRight:e.ckRight}}),a("div",{staticClass:"page-time"},[a("span",[e._v(e._s(e.sleepTime))])]),a("div",{style:{width:"100%",height:"4rem"},attrs:{id:"myChartNew"}},[a("div")]),a("div",{staticClass:"sleep-time"},[a("div",{staticClass:"sleep-time-1"},[e._v(e._s(e.lang.tip10))]),a("div",{staticClass:"sleep-time-2"},[a("span",{staticClass:"sleep-time-span-1"},[e._v(e._s(e.dataObj?e.util.second_host(e.dataObj.totalSleepTime)[0]:"-"))]),a("span",{staticClass:"sleep-time-span-2"},[e._v(e._s(e.lang.hour))]),a("span",{staticClass:"sleep-time-span-1"},[e._v(e._s(e.dataObj?e.util.second_host(e.dataObj.totalSleepTime)[1]:"-"))]),a("span",{staticClass:"sleep-time-span-2"},[e._v(e._s(e.lang.minute))])])]),a("div",{staticClass:"cake-echart",on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[e._m(0),a("div",{staticClass:"cake-echart-2"},[a("div",{staticClass:"leng-1"},[a("span",{staticClass:"span-1"},[a("i"),e._v(" "+e._s(e.lang.deepSleep)+" ")]),a("span",{staticClass:"span-2"},[e._v(e._s(e.dataObj?e.util.second_host(e.dataObj.totalDeepTime)[0]+e.lang.hour:"-"+e.lang.hour)+e._s(e.dataObj?e.util.second_host(e.dataObj.totalDeepTime)[1]+e.lang.minute:"-"+e.lang.minute))])]),a("div",{staticClass:"leng-1"},[a("span",{staticClass:"span-1"},[a("i",{staticStyle:{background:"#5C73FF"}}),e._v(" "+e._s(e.lang.easySleep)+" ")]),a("span",{staticClass:"span-2"},[e._v(e._s(e.dataObj?e.util.second_host(e.dataObj.totalShallowTime)[0]+e.lang.hour:"-"+e.lang.hour)+e._s(e.dataObj?e.util.second_host(e.dataObj.totalShallowTime)[1]+e.lang.minute:"-"+e.lang.minute))])]),a("div",{staticClass:"leng-2"},[a("span",{staticClass:"span-1"},[a("i"),e._v(" "+e._s(e.lang.sober)+" ")]),a("span",{staticClass:"span-2"},[e._v(e._s(e.dataObj?e.dataObj.totalSoberNum:"-")+e._s(e.lang.sequence))])])])]),a("div",{staticClass:"slider-code"},[a("p",{staticClass:"slider-code-p"},[e._v(" "+e._s(e.lang.sleepQuality)+": "),a("span",[e._v(e._s(e.value1>74?e.lang.sleep4:e.value1>49?e.lang.sleep3:e.value1>24?e.lang.sleep2:e.lang.sleep1))])]),a("van-slider",{attrs:{"bar-height":"8px",disabled:"",max:"100",min:"0",step:1},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("div",{staticClass:"slider-code-span-view"},[a("span",[e._v(e._s(e.lang.sleep1))]),a("span",[e._v(e._s(e.lang.sleep2))]),a("span",[e._v(e._s(e.lang.sleep3))]),a("span",[e._v(e._s(e.lang.sleep4))])])],1),a("div",{staticClass:"tip-view"},[a("p",{staticClass:"tip-view-1"},[e._v(e._s(e.lang.sleepTip1))]),a("p",{staticClass:"tip-view-2"},[e._v(e._s(e.lang.sleepTip2))])]),a("div",{staticStyle:{width:"100%",height:"60px"}}),a("v-screen",{ref:"screen",attrs:{index:"1"},on:{select:e.select}}),a("my-date",{directives:[{name:"show",rawName:"v-show",value:e.myDateState,expression:"myDateState"}],ref:"myDate",on:{clickDay:e.clickDay}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cake-echart-1",attrs:{id:"code-echart-2"}},[a("div")])}],l=(a("b0c0"),a("b680"),a("ac1f"),a("5319"),a("1276"),a("4795"),a("15db")),n=a.n(l),o=a("228c"),r=a.n(o),p=a("3dc5"),c={name:"refurbish",components:{myDate:p["a"]},data:function(){return{dateTime:window.lang.headDay,value:0,value1:0,index:1,sleepValue:0,sleepType:"",sleepTime:"00:00 - 01:00",sleepData:[],myChart:null,myChart1:null,myDateState:!1,myWinState:!1,currentPage:1,pageSize:50,resultList:[],dataObj:null,myChart2:null,types:[{name:lang.deepSleep,color:"#8D44DA"},{name:lang.easySleep,color:"#D137CD"},{name:lang.sober,color:"#FCBD28"}],myChartsData:[],dateList:[]}},watch:{value:function(e){for(var t=n.a.xAxis.data[e].replace(":",""),a=0;a<this.sleepData.length;a++){var s=this.sleepData[a].timeRange.split("-")[0].replace(":",""),i=this.sleepData[a].timeRange.split("-")[1].replace(":","");s<i?t>=s&&t<=i&&(this.sleepValue=this.sleepData[a].durationMinute,this.sleepType=1==this.sleepData[a].type?lang.deepSleep:lang.easySleep,this.sleepTime=this.sleepData[a].timeRange.replace("-"," - ")):(t<=2400&&t>=s||t>=0&&t<=i)&&(this.sleepValue=this.sleepData[a].durationMinute,this.sleepType=1==this.sleepData[a].type?lang.deepSleep:lang.easySleep,this.sleepTime=this.sleepData[a].timeRange.replace("-"," - "))}}},methods:{myEcharts:function(){this.myChart2=this.$echarts.init(document.getElementById("myChartNew"));var e={title:{},legend:{selectedMode:!1,itemGap:52,data:[lang.sober,lang.easySleep,lang.deepSleep]},grid:{left:"0%",right:"0%",bottom:"3%",containLabel:!0},xAxis:{min:0,scale:!0,splitLine:{show:!1},show:!1},yAxis:{data:[lang.deepSleep,lang.easySleep,lang.sober],show:!1,axisPointer:{show:!1}},series:[{type:"custom",renderItem:this.renderItem,itemStyle:{opacity:.8},encode:{x:[1,2],y:0},barWidth:100,barCategoryGap:"0%",data:this.myChartsData},{name:lang.sober,type:"bar",color:"#FCBD28",barWidth:0},{name:lang.easySleep,type:"bar",color:"#D137CD",barWidth:0},{name:lang.deepSleep,type:"bar",color:"#8D44DA",barWidth:0,barGap:100}],tooltip:{trigger:"item",axisPointer:{type:"cross",crossStyle:{type:"dashed",opacity:1},label:{backgroundColor:"rgba(0,0,0,0)"}},formatter:function(e){return e.name+":"+e.value[3]}}};this.myChart2.setOption(e)},renderItem:function(e,t){var a=t.value(0),s=t.coord([t.value(1),a]),i=t.coord([t.value(2),a]),l=1*t.size([0,1])[1],n=this.$echarts.graphic.clipRectByRect({x:s[0],y:s[1]-l/2,width:i[0]-s[0],height:l},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return n&&{type:"rect",transition:["shape"],shape:n,style:t.style()}},lessValue:function(){this.$refs.myDate.lessD()},addValue:function(){this.$refs.myDate.addD()},setChartData:function(e){var t=0;for(var a in e){var s=["1","2","3","4"],i={name:"",value:"",itemStyle:{normal:{color:""}}};s[0]=0==e[a].type?2:2==e[a].type?1:0,s[1]=t,t+=e[a].durationMinute,s[2]=t,s[3]=e[a].timeRange,i.name=this.types[0==e[a].type?2:2==e[a].type?1:0].name,i.value=s,i.itemStyle.normal.color=this.types[0==e[a].type?2:2==e[a].type?1:0].color,this.myChartsData.push(i)}this.myChart2.resize(),this.myEcharts()},getDayData:function(e){var t=this;console.log(e),this.Http(this.api["SleepDay"],{dateString:e}).then((function(e){if("000"==e.data.code){var a,s,i,l,o,p,c,d,h=e.data.result.list;t.setChartData(h),t.resultList=null!==(a=e.data.result.list)&&void 0!==a?a:[],t.dataObj=null!==(s=e.data.result.obj)&&void 0!==s?s:null;var u=t.dataObj.totalDeepTime/t.dataObj.totalSleepTime*100;t.value1=Math.round(u);var m=[];t.sleepData=[];for(var g=function(e){2==t.resultList[e].type?(m.push([{xAxis:t.resultList[e].timeRange.split("-")[0],itemStyle:{color:"rgb(92, 115, 255)"}},{xAxis:t.resultList[e].timeRange.split("-")[1],yAxis:"30"}]),t.sleepData.push(t.resultList[e])):1==t.resultList[e].type&&(m.push([{xAxis:t.resultList[e].timeRange.split("-")[0],itemStyle:{color:"#ac009a"}},{xAxis:t.resultList[e].timeRange.split("-")[1],yAxis:"20"}]),t.sleepData.push(t.resultList[e]))},y=0;y<t.resultList.length;y++)g(y);n.a.series[0].markArea.data=m,console.log(n.a);var v=(null!==(i=null===(l=t.dataObj)||void 0===l?void 0:l.totalShallowTime)&&void 0!==i?i:0)/(null!==(o=null===(p=t.dataObj)||void 0===p?void 0:p.totalSleepTime)&&void 0!==o?o:0)||0;r.a.series[0].data=[{value:v?(100*v).toFixed(1):0,name:lang.easySleep,selected:!0},{value:v&&null!==(c=null===(d=t.dataObj)||void 0===d?void 0:d.totalDeepTime)&&void 0!==c&&c?(100-(100*v).toFixed(1)).toFixed(1):0,name:lang.deepSleep}],t.sleepData.length>0?(console.log("请求数据"),console.log(t.sleepData),t.sleepValue=t.sleepData[0].durationMinute,t.sleepType=1==t.sleepData[0].type?lang.deepSleep:lang.easySleep,t.sleepTime=t.sleepData[0].timeRange.split("-")[0]+" - "+t.sleepData[t.sleepData.length-1].timeRange.split("-")[1]):(t.sleepValue=0,t.sleepType="",t.sleepTime="00:00 - 01:00"),t.myChart1.setOption(r.a),t.myChart1.resize()}}))},clickConten:function(){this.myDateState=!0},clickDay:function(e){this.myChartsData=[],this.dateTime=e.replace("-",lang.year).replace("-",lang.month)+lang.day,this.getDayData(e)},select:function(e){1==e&&1!=this.index?this.$router.push({path:"/sleepDay?lang="+this.$route.query.lang}):2==e&&2!=this.index?this.$router.push({path:"/sleepWeek?lang="+this.$route.query.lang}):3==e&&3!=this.index&&this.$router.push({path:"/sleepMonth?lang="+this.$route.query.lang})},today:function(){},ckRight:function(){this.$refs.screen.open()},getSleepDay:function(){console.log("调用APP todaySleep方法"),window.pushApp.todaySleep.func()}},mounted:function(){this.myEcharts(),this.getSleepDay(),this.getDayData(this.util.dateFormat("","YYYY-MM-DD"));setTimeout((function(){window.pushApp.todaySleep.callback=function(e){},console.log("调用 todaySleep 等待结果 .... ")}),300),this.myChart1=this.$echarts.init(document.getElementById("code-echart-2")),this.myChart1.setOption(r.a),1!=localStorage.userIndex&&(this.myWinState=!0)}},d=c,h=(a("bbd8"),a("2877")),u=Object(h["a"])(d,s,i,!1,null,"5c8a06f7",null);t["default"]=u.exports},"8d25":function(e,t,a){},b680:function(e,t,a){"use strict";var s=a("23e7"),i=a("a691"),l=a("408a"),n=a("1148"),o=a("d039"),r=1..toFixed,p=Math.floor,c=function(e,t,a){return 0===t?a:t%2===1?c(e,t-1,a*e):c(e*e,t/2,a)},d=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},h=r&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){r.call({})}));s({target:"Number",proto:!0,forced:h},{toFixed:function(e){var t,a,s,o,r=l(this),h=i(e),u=[0,0,0,0,0,0],m="",g="0",y=function(e,t){var a=-1,s=t;while(++a<6)s+=e*u[a],u[a]=s%1e7,s=p(s/1e7)},v=function(e){var t=6,a=0;while(--t>=0)a+=u[t],u[t]=p(a/e),a=a%e*1e7},f=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==u[e]){var a=String(u[e]);t=""===t?a:t+n.call("0",7-a.length)+a}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return String(r);if(r<0&&(m="-",r=-r),r>1e-21)if(t=d(r*c(2,69,1))-69,a=t<0?r*c(2,-t,1):r/c(2,t,1),a*=4503599627370496,t=52-t,t>0){y(0,a),s=h;while(s>=7)y(1e7,0),s-=7;y(c(10,s,1),0),s=t-1;while(s>=23)v(1<<23),s-=23;v(1<<s),y(1,1),v(2),g=f()}else y(0,a),y(1<<-t,0),g=f()+n.call("0",h);return h>0?(o=g.length,g=m+(o<=h?"0."+n.call("0",h-o)+g:g.slice(0,o-h)+"."+g.slice(o-h))):g=m+g,g}})},bbd8:function(e,t,a){"use strict";var s=a("8d25"),i=a.n(s);i.a}}]);